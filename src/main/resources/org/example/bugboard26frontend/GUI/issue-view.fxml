<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>
<?import javafx.scene.shape.*?>

<BorderPane prefHeight="720.0" prefWidth="1280.0" styleClass="main-container" stylesheets="@StyleIssueDetail.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.bugboard26frontend.GUI.IssueController">

    <top>
        <HBox alignment="CENTER_LEFT" spacing="15" styleClass="top-bar">
            <padding><Insets bottom="10" left="20" right="20" top="10" /></padding>

            <Label styleClass="logo-text" text="BugBoard 26" />

            <Region HBox.hgrow="ALWAYS" />
            <Button onAction="#apriDashboard" styleClass="btn-back" text="Indietro" />

        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" styleClass="scroller">
            <content>
                <HBox alignment="TOP_CENTER" spacing="25" styleClass="content-padding">

                    <VBox spacing="25" HBox.hgrow="ALWAYS">

                        <VBox spacing="15" styleClass="card">
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <VBox>
                                    <Circle fx:id="avatarCircle" radius="20.0">
                                        <fill>
                                            <ImagePattern>
                                                <image>
                                                    <Image url="@images/logoutente.png" />
                                                </image>
                                            </ImagePattern>
                                        </fill>
                                        <stroke>WHITE</stroke>
                                        <strokeWidth>1.0</strokeWidth>
                                    </Circle>

                                </VBox>
                                <Label style="-fx-text-fill: #94a3b8; -fx-font-size: 11px;" text="on: 05/10/25" textFill="WHITE" />
                            </HBox>

                            <Label fx:id="labelTitolo" styleClass="issue-title" text="Il sistema genera un errore codice #501250" wrapText="true" />

                            <Label fx:id="labelDescrizione" styleClass="issue-desc" text="Descrizione issue placeholder. Quando si tenta di caricare un file con piÃ¹ di 10000 righe il sistema va in crash..." wrapText="true" />

                            <StackPane styleClass="image-area">
                                <Label text="[Area Immagine Allegata]" textFill="#64748b" />
                            </StackPane>
                        </VBox>

                        <VBox spacing="15">
                            <Label styleClass="section-title" text="Commenti" />

                            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" prefHeight="250.0" style="-fx-background-color: transparent; -fx-background: transparent; -fx-padding: 0;">
                                <content>
                                    <VBox fx:id="commentsContainer" spacing="10" style="-fx-background-color: transparent;">
                                        <padding>
                                            <Insets right="10" />
                                        </padding>
                                    </VBox>
                                </content>
                            </ScrollPane>

                            <VBox spacing="10">
                                <TextArea fx:id="textAreaCommento" prefHeight="80" promptText="Scrivi un commento..." styleClass="dark-input" wrapText="true" />
                                <Button onAction="#inserisciCommento" styleClass="btn-green" text="Invia Commento" />
                            </VBox>
                        </VBox>
                    </VBox>

                    <VBox minWidth="300" prefHeight="655.0" prefWidth="300" spacing="20">

                        <VBox spacing="20" styleClass="card">

                            <VBox spacing="5">
                                <Label styleClass="meta-label" text="PrioritÃ :" />
                                <Label fx:id="badgePriorita" maxWidth="Infinity" styleClass="badge, badge-red" text="HIGH" />
                            </VBox>

                            <VBox spacing="5">
                                <Label styleClass="meta-label" text="Tipologia Issue:" />
                                <Label fx:id="badgeTipo" maxWidth="Infinity" styleClass="badge, badge-purple" text="BUG" />
                            </VBox>

                            <VBox spacing="5">
                                <Label styleClass="meta-label" text="Assegnazione:" />
                                <Label maxWidth="Infinity" styleClass="readonly-field" text="Non ancora assegnato" />
                            </VBox>

                            <Separator style="-fx-opacity: 0.1; -fx-background-color: white;" />

                            <VBox spacing="10">
                                <Button maxWidth="Infinity" onAction="#apriAssegnazioneIssue" styleClass="btn-blue" text="Assegna" />
                                <Button maxWidth="Infinity" styleClass="btn-outline-red" text="Archivia Issue" />
                            </VBox>

                        </VBox>
                    </VBox>

                </HBox>
            </content>
        </ScrollPane>
    </center>

    <left>
        <VBox spacing="0" styleClass="sidebar">
            <padding><Insets top="20" /></padding>

            <Button maxWidth="Infinity" onAction="#apriDashboard" styleClass="sidebar-btn, active" text="â‰¡  Lista Issue" />
            <Button maxWidth="Infinity" onAction="#apriLeMieIssue" styleClass="sidebar-btn" text="â‰¡ Le mie Issue" />
            <Button onAction="#apriCreaNuovoUtente" prefHeight="40.0" prefWidth="200.0" styleClass="sidebar-btn" text="ðŸ‘¤ Crea Utente" />

            <Region VBox.vgrow="ALWAYS" />
            <Region minWidth="200" />

            <Button maxWidth="Infinity" styleClass="sidebar-btn" text="âš™  Impostazioni" />
            <Button maxWidth="Infinity" styleClass="sidebar-btn" text="ðŸ’¬  Aiuto" />
        </VBox>
    </left>
</BorderPane>
